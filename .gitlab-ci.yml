# defined stages
stages:
  - install_deps
  - build
  - test
  
cache:
  key: ${CI_BUILD_REF_NAME}
  paths:
    - node_modules/
    
before_script:
  - export PATH=$PATH:/usr/local/bin
    
    
# 安装依赖
install_deps:
  stage: install_deps
  tags:
    - bac-testing
  only:
    - develop
    - master
  script:
    - ~/.nvm/versions/node/v8.8.0/bin/npm install
    
# defined job
job1:
  stage: test
  tags:
    - bac-testing
  script:
    - echo "I am job1"
    - echo "I am in test stage"
# defined job
job2:
  stage: build
  tags:
    - bac-prod
  script:
    - echo "I am job2"
    - pwd