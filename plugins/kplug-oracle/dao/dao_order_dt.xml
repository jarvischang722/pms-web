<?xml version="1.0" encoding="UTF-8"?>
<root>
    <!-- ['PMS0820010'] 未來入住之訂房卡明細-->
    <dao name="CHK_ORDER_DT_ISEXIST">
        <statement><![CDATA[
              SELECT COUNT(*) AS order_dt_count FROM
              ORDER_DT WHERE
              ATHENA_ID = trim(:athena_id) AND trim(HOTEL_COD) = trim(:hotel_cod) AND  ORDER_STA = 'N' AND CI_DAT >= to_date(trim(:belong_dat), 'YYYY/MM/DD') AND INSTR( trim(CHARACTER_RMK), ''''|| trim(:character_cod) || '''' ) > 0 AND ROWNUM <= 1
        ]]>
        </statement>
        <parameter type="string" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">hotel_cod</parameter>
        <parameter type="string" kind="3">belong_dat</parameter>
        <parameter type="string" kind="3">character_cod</parameter>
    </dao>

    <!-- [prg_id: PMS0810090 ] -->
    <dao name="GET_ORDER_DT.GUEST_TYP_COUNT">
        <statement><![CDATA[
       select count(*)  as guest_count
       from order_dt
        where athena_id = ?  and trim(hotel_cod) = trim(?)
        and trim(guest_typ) = trim(?) and rownum = 1
        ]]>
        </statement>
        <parameter type="int" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
        <parameter type="string" kind="1">guest_typ</parameter>
    </dao>
</root>