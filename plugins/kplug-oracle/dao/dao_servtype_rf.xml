<?xml version="1.0" encoding="UTF-8"?>
<root>
    <!-- 取得多筆 -->
    <dao name="QRY_SERV_TYPE_RF">
        <statement><![CDATA[

        select athena_id, hotel_cod, serv_typ, type_nam, modify_sta, use_typ, sort_cod, ins_dat, ins_usr, upd_dat, upd_usr
        from servtype_rf where athena_id = trim(:athena_id) and hotel_cod = trim(:hotel_cod)

        ]]></statement>
        <parameter type="string" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">hotel_cod</parameter>
    </dao>

    <!-- 取得 使用規則 -->
    <dao name="QRY_SERV_TYPE_RF_USE_TYP">
        <statement><![CDATA[

        select code use_typ, code_nam
        from ais_external_dw
        where dw_nam = 'd_hfd_servtype_use_typ' and lang_cod = pg_ais.sf_lang_cod(pg_ais.sf_language(0)) and athena_id = trim(:athena_id) order by sort_cod

        ]]></statement>
        <parameter type="string" kind="3">athena_id</parameter>
    </dao>

    <!--
        1.欄位modify_sta不為’Y’的，則不可刪除
        2.檢查若服務項目設定有使用，則不可刪除
    -->
    <dao name="CHK_SERV_TYPE_RF_IS_EXIST_SERVICE_RF">
        <statement><![CDATA[

        select count(*) from service_rf
        where athena_id = trim(:athena_id)
        and hotel_cod = trim(:hotel_cod)
        and serv_typ = trim(:serv_typ)

        ]]></statement>
        <parameter type="string" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">hotel_cod</parameter>
        <parameter type="string" kind="3">serv_typ</parameter>
    </dao>


</root>