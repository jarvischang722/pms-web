<?xml version="1.0" encoding="UTF-8"?>
<root>
    <!--
        [PMS0860010] 未於商務公司資料中指定者可刪除
        訊息:在商務公司資料維護已使用,不可刪除
    -->
    <dao name="CHK_CUST_TYPE_RF_IS_EXIST_CUST_MN">
        <statement><![CDATA[
			select count(*) as cust_mn_count from cust_mn
			where  athena_id = trim(:athena_id)
			and trim(type_cod) = trim(:type_cod)
			and rownum = 1
        ]]>
        </statement>
        <parameter type="string" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">type_cod</parameter>
    </dao>

    <!--
    [PMS0860020] 未於商務公司資料中指定者可刪除
    訊息:在商務公司資料維護已使用,不可刪除
-->
    <dao name="QRY_BUSINESS_RF_IS_EXIST_CUST_MN_COUNT">
        <statement><![CDATA[
			select count(*) as cust_mn_count from cust_mn
			where  athena_id = trim(:athena_id)
			and trim(business_cod) = trim(:business_cod)
			and rownum = 1
        ]]>
        </statement>
        <parameter type="string" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">business_cod</parameter>
    </dao>

    <!--
    [PMS0860070] 在商務公司資料維護已使用,不可刪除
    訊息:在商務公司資料維護已使用,不可刪除
-->
    <dao name="CHK_CONSTRACT_STA_IS_EXIST_CUST_MN">
        <statement><![CDATA[
                select count(*) custmncount
                 from cust_mn
                where athena_id =?   and contract_sta = ? and rownum = 1
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">status_cod</parameter>
    </dao>

    <!--[PMS0810180] 顯示ashow_cod跳出訊息的欄位資料 -->
    <dao name="QRY_CUST_MN_FOR_ASHOW_COD">
        <statement><![CDATA[
            select  show_cod, cust_nam, contact1_rmk, status_cod, cust_cod from cust_mn
            where status_cod='N'  and cust_typ='N' and athena_id =?
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>

    </dao>

    <!--[PMS0810180] 顯示cshow_cod跳出訊息的欄位資料 -->
    <dao name="QRY_CUST_MN_FOR_CSHOW_COD">
        <statement><![CDATA[
            select show_cod, cust_nam, contact1_rmk, status_cod,cust_cod  from cust_mn
            where status_cod='N'  and cust_typ='N' and athena_id =?
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
    </dao>

    <!--[PMS0830090] 顯示cshow_cod跳出訊息的選擇客戶代號 -->
    <dao name="QRY_CUSTMN_DEPOSIT_NOS">
        <statement><![CDATA[
              select show_cod ,cust_nam ,cust_typ
               from cust_mn where athena_id = ? and show_cod = ? and status_cod <> 'D'
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">show_cod</parameter>
    </dao>

    <!--[PMS0860030] 查詢商務公司資料數量 -->
    <dao name="QRY_AREA_COUNT">
        <statement><![CDATA[
              select count(*) as areacount from cust_mn
              where athena_id = :athena_id
              and trim(area_cod) = trim(:area_cod)
              and rownum = 1
        ]]>
        </statement>
        <parameter type="int" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">area_cod</parameter>
    </dao>

    <!--[PMS0830090] 查詢對應的客戶內碼by 客戶代號 -->
    <dao name="QRY_CUST_COD_BY_SHOW_COD">
        <statement><![CDATA[
              select cust_cod
              from cust_mn
              where trim(show_cod) = trim(:show_cod)
              and rownum = 1
        ]]>
        </statement>
        <parameter type="string" kind="3">show_cod</parameter>
    </dao>

    <!--[PMS0830090] 查詢對應的客戶內碼by 客戶名稱 -->
    <dao name="QRY_CUST_COD_BY_CUST_NAM">
        <statement><![CDATA[
              select cust_cod
              from cust_mn
              where trim(cust_nam) = trim(:cust_nam)
              and rownum = 1
        ]]>
        </statement>
        <parameter type="string" kind="3">cust_nam</parameter>
    </dao>


    <!--
    [PMS0620010] 未於商務公司資料指定者可刪除
    訊息『商務公司資料已使用，不可刪除』
    [PMS0620020] 業務員狀態由「N:在職」改「Q:離職」時，檢查商務公司業務員是否指定此業務員資料，若有指定則不允許修改
    訊息『商務公司資料已使用，不可修改狀態』
    -->
    <dao name="CHK_SALES_COD_IS_EXIST_IN_CUST_MN">
        <statement><![CDATA[
            select count(*) as cust_sales_Count
            from cust_mn
            where athena_id = :athena_id
            and trim(sales_cod) = trim(:sales_cod)
            and rownum = 1
        ]]>
        </statement>
        <parameter type="number" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">sales_cod</parameter>
    </dao>

    <!--[PMS0620050] 業務員拜訪記錄 商業公司選單-->
    <dao name="SEL_CUST_MN">
        <statement><![CDATA[
            select cust_cod, cust_nam from cust_mn where athena_id =:athena_id
        ]]>
        </statement>
        <parameter type="number" kind="3">athena_id</parameter>
    </dao>
</root>