<?xml version="1.0" encoding="UTF-8"?>
<root>
    <!-- [prg_id: PMS0810130 ] -->
    <dao name="CHK_ORDER_MN_RV_TYP_IS_EXIST">
        <statement><![CDATA[
            select count(*) as rvtyp_count
            from order_mn
            where athena_id = :athena_id and trim(hotel_cod) = trim(:hotel_cod) and rownum = 1
        ]]></statement>
        <parameter type="int" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">hotel_cod</parameter>
        <statement test="_v(param.rv1_typ)"><![CDATA[and rv1_typ is not null]]></statement>
        <statement test="_v(param.rv2_typ)"><![CDATA[and rv2_typ is not null]]></statement>
        <statement test="_v(param.rv3_typ)"><![CDATA[and rv3_typ is not null]]></statement>
        <statement test="_v(param.rv4_typ)"><![CDATA[and rv4_typ is not null]]></statement>
        <statement test="_v(param.rv5_typ)"><![CDATA[and rv5_typ is not null]]></statement>
        <statement test="_v(param.rv6_typ)"><![CDATA[and rv6_typ is not null]]></statement>
        <statement test="_v(param.rv7_typ)"><![CDATA[and rv7_typ is not null]]></statement>
        <statement test="_v(param.rv8_typ)"><![CDATA[and rv8_typ is not null]]></statement>
        <statement test="_v(param.rv9_typ)"><![CDATA[and rv9_typ is not null]]></statement>
        <statement test="_v(param.rv10_typ)"><![CDATA[and rv10_typ is not null]]></statement>
    </dao>

    <!-- [prg_id: PMS0810130 ] -->
    <dao name="CHK_ORDER_MN_RV_TYP_CODE_IS_EXIST">
        <statement><![CDATA[
          select count(*)  as rvtyp_count
          from order_mn
          where athena_id = :athena_id and trim(hotel_cod) = trim(:hotel_cod) and  rownum = 1
        ]]></statement>
        <parameter type="int" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">hotel_cod</parameter>
        <statement test="_v(param.rv1_typ)"><![CDATA[and rv1_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv2_typ)"><![CDATA[and rv2_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv3_typ)"><![CDATA[and rv3_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv4_typ)"><![CDATA[and rv4_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv5_typ)"><![CDATA[and rv5_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv6_typ)"><![CDATA[and rv6_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv7_typ)"><![CDATA[and rv7_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv8_typ)"><![CDATA[and rv8_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv9_typ)"><![CDATA[and rv9_typ = :rv_typ ]]></statement>
        <statement test="_v(param.rv10_typ)"><![CDATA[and rv10_typ = :rv_typ ]]></statement>
        <parameter type="string" kind="3">rv_typ</parameter>
    </dao>

    <!-- [prg_id: PMS0810090 ] -->
    <dao name="GET_ORDER_MN.GUEST_TYP_COUNT">
        <statement><![CDATA[
       select count(*)  as guest_count
       from order_mn
        where athena_id = ?  and trim(hotel_cod) = trim(?)
        and trim(guest_typ) = trim(?) and rownum = 1
        ]]>
        </statement>
        <parameter type="int" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
        <parameter type="string" kind="1">guest_typ</parameter>
    </dao>

    <!-- [prg_id: PMS0810110] -->
    <dao name="GET_ORDER_MN.SOURCE_TYP_COUNT">
        <statement><![CDATA[
        select count(*)  as source_count
        from order_mn
        where athena_id = ?  and trim(hotel_cod) = trim(?)
        and trim(source_typ) = trim(?) and rownum = 1
        ]]>
        </statement>
        <parameter type="int" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
        <parameter type="string" kind="1">source_typ</parameter>
    </dao>

    <!-- [prg_id: PMS0810150] -->
    <dao name="GET_ORDER_MN.GUARENTEE_TYP_COUNT">
        <statement><![CDATA[
       select count(*)  as guarentee_typ_count
       from order_mn
        where athena_id = ? and trim(hotel_cod) = trim(?) and trim(guarentee_typ) = trim(?) and rownum = 1
        ]]>
        </statement>
        <parameter type="int" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
        <parameter type="string" kind="1">guarentee_typ</parameter>
    </dao>

    <!--
    [PMS0620010] 未於訂房卡資料指定者可刪除
    訊息『訂房卡資料已使用，不可刪除』
    -->
    <dao name="CHK_SALES_COD_IS_EXIST_IN_ORDER_MN">
        <statement><![CDATA[
            select count(*) as order_sales_Count
            from order_mn
            where athena_id = :athena_id
            and trim(sales_cod) = trim(:sales_cod)
            and rownum = 1
        ]]>
        </statement>
        <parameter type="number" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">sales_cod</parameter>
    </dao>
</root>