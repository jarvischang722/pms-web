<?xml version="1.0" encoding="UTF-8"?>
<root>
    <!-- ['PMS0820010'] 房間特色設定 -->
    <dao name="CHK_ROOM_MN_ISEXIST_CHARACTER_COD">
        <statement><![CDATA[
               SELECT COUNT(*) as character_cod_count FROM
               ROOM_MN WHERE
               ATHENA_ID = trim(:athena_id) AND trim(HOTEL_COD) = trim(:hotel_cod) AND INSTR( CHARACTER_RMK, '''' || trim(:character_cod) || '''' ) > 0 AND ROWNUM <= 1
        ]]>
        </statement>
        <parameter type="string" kind="3">athena_id</parameter>
        <parameter type="string" kind="3">hotel_cod</parameter>
        <parameter type="string" kind="3">character_cod</parameter>
    </dao>

    <!-- ['PMS0820020'] 房間設定(多筆) -->
    <dao name="QRY_ROOM_MN">
        <statement><![CDATA[
               select athena_id, hotel_cod, room_nos, room_cod, room_sta, assign_sta, clean_sta, bed_sta
               from room_mn
               where trim(athena_id) = ? and trim(hotel_cod) = ? order by view_seq, room_nos
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
    </dao>

    <!-- ['PMS0820020'] 房間設定(單筆) -->
    <dao name="QRY_SINGLE_ROOM_MN">
        <statement><![CDATA[
               select athena_id, hotel_cod, build_nos, floor_nos, room_nos, room_cod, room_sta, assign_sta, clean_sta, clean_cod, conn_room, character_rmk, oos_sta, osreson_rmk, level_nos, bed_sta, user_rmk, ci_dat, co_dat, adult_qnt, child_qnt, baby_qnt, alarm_dat, pre_alarm_dat, view_seq, ins_dat, ins_usr, upd_dat, upd_usr
               from room_mn
               where trim(athena_id) = ? and trim(hotel_cod) = ? and room_nos = ?
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
        <parameter type="string" kind="1">room_nos</parameter>
    </dao>

    <!-- ['PMS0820020'] 查詢條件:棟別 -->
    <dao name="QRY_ROOM_MN_QRY_BUILD_NOS">
        <statement><![CDATA[
              select distinct build_nos
              from room_mn
              where athena_id = ? and hotel_cod = ? order by build_nos
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
    </dao>

    <!-- ['PMS0820020'] 查詢條件:樓層 -->
    <dao name="QRY_ROOM_MN_QRY_FLOOR_NOS">
        <statement><![CDATA[
             select distinct floor_nos
             from room_mn
             where athena_id = ? and hotel_cod = ? order by floor_nos
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
    </dao>

    <!-- ['PMS0820020'] 查詢有無連通房號 -->
    <dao name="QRY_ROOM_MN_CONN_ROOM">
        <statement><![CDATA[
            select conn_room
            from room_mn
            where trim(athena_id) = ? and trim(hotel_cod) = ? and room_nos = ? and rownum = 1
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
        <parameter type="string" kind="1">room_nos</parameter>
    </dao>

    <!-- ['PMS0830090'] 不可設 room_mn 房號的第一碼 -->
    <dao name="QRY_ROOM_MN_ROOM_NOS">
        <statement><![CDATA[
             select unique substr(room_nos, 1, 1) as room_nos from room_mn
             where athena_id = ?
             and trim(hotel_cod) = trim(?)
        ]]>
        </statement>
        <parameter type="string" kind="1">athena_id</parameter>
        <parameter type="string" kind="1">hotel_cod</parameter>
    </dao>

</root>